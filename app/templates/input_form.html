<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Input Aset Baru</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#1976d2">
    <link rel="icon" href="/static/icon-192.png" sizes="192x192" type="image/png">
	
	<link rel="stylesheet" href="/static/style.css">

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 1rem;
            max-width: 720px;
            margin: auto;
        }

        h1 {
            text-align: center;
            color: #1976d2;
        }

        form {
            background-color: white;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }

        label {
            display: block;
            margin-top: 1rem;
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 8px;
            margin-top: 4px;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
        }

        button {
            margin-top: 1.5rem;
            background-color: #1976d2;
            color: white;
            padding: 10px;
            border: none;
            width: 100%;
            font-size: 16px;
            border-radius: 6px;
            cursor: pointer;
        }

        button:hover {
            background-color: #125ea2;
        }

        .back-link {
            display: inline-block;
            margin: 1rem 0;
            text-decoration: none;
            color: #1976d2;
        }
    </style>
</head>
<body>
    <h1>â• Input Aset Baru</h1>

    <p style="text-align: center;">
        <a href="/" class="back-link">ğŸ”™ Kembali ke Beranda</a>
    </p>

    <form method="post">
        <label for="item_name">ğŸ“¦ Nama Aset</label>
        <input type="text" id="item_name" name="item_name" required>

        <label for="category">ğŸ“ Kategori</label>
        <input list="category_list" id="category" name="category" required>
        <datalist id="category_list">
            {% for cat in categories %}
                <option value="{{ cat }}">
            {% endfor %}
        </datalist>

        <label for="type_">ğŸ§© Tipe</label>
        <input list="type_list" id="type_" name="type_" required>
        <datalist id="type_list">
            {% for t in types %}
                <option value="{{ t['Type'] }}">{{ t['Type'] }} ({{ t['Category'] }})
            {% endfor %}
        </datalist>

        <label for="manufacture">ğŸ­ Merk / Manufacture</label>
        <input type="text" id="manufacture" name="manufacture">

        <label for="model">ğŸ“ Model</label>
        <input type="text" id="model" name="model">

        <label for="serial_number">ğŸ”¢ Nomor Seri</label>
        <input type="text" id="serial_number" name="serial_number">

        <label for="company">ğŸ¢ Perusahaan</label>
        <input list="company_list" id="company" name="company" required>
        <datalist id="company_list">
            {% for c in companies %}
                <option value="{{ c }}">
            {% endfor %}
        </datalist>

        <label for="code_company">ğŸ·ï¸ Kode Perusahaan</label>
        <input type="text" id="code_company" name="code_company" required maxlength="3">

        <label for="bisnis_unit">ğŸ­ Unit Bisnis</label>
        <input type="text" id="bisnis_unit" name="bisnis_unit">

        <label for="location">ğŸ“ Lokasi</label>
        <select id="location" name="location" required onchange="updateRooms()">
            <option value="">Pilih Lokasi</option>
            {% for loc in locations %}
                <option value="{{ loc }}">{{ loc }}</option>
            {% endfor %}
        </select>

        <label for="room_location">ğŸ¢ Ruangan</label>
        <select id="room_location" name="room_location" required>
            <option value="">Pilih Ruangan</option>
        </select>

        <label for="notes">ğŸ“ Catatan</label>
        <textarea id="notes" name="notes" rows="2"></textarea>

        <label for="condition">âš™ï¸ Kondisi</label>
        <input type="text" id="condition" name="condition">

        <label for="purchase_date">ğŸ—“ï¸ Tanggal Pembelian</label>
        <input type="date" id="purchase_date" name="purchase_date" required>

        <label for="purchase_cost">ğŸ’° Harga Pembelian</label>
        <input type="number" id="purchase_cost" name="purchase_cost" required>

        <label for="warranty">ğŸ“œ Garansi</label>
        <select id="warranty" name="warranty">
            <option value="No">No</option>
            <option value="Yes">Yes</option>
        </select>

        <label for="supplier">ğŸšš Supplier</label>
        <input type="text" id="supplier" name="supplier">

        <label for="journal">ğŸ“– Jurnal</label>
        <input type="text" id="journal" name="journal">

        <label for="owner">ğŸ‘¤ Penanggung Jawab</label>
        <input list="owner_list" id="owner" name="owner" required>
        <datalist id="owner_list">
            {% for o in owners %}
                <option value="{{ o }}">
            {% endfor %}
        </datalist>

        <button type="submit">âœ… Simpan Aset</button>
    </form>

    <!-- JavaScript: Filter Ruangan Berdasarkan Lokasi -->
    <script>
        const roomMap = {{ room_map | tojson | safe }};

        function updateRooms() {
            const loc = document.getElementById("location").value;
            const roomSelect = document.getElementById("room_location");

            roomSelect.innerHTML = '<option value="">Pilih Ruangan</option>';

            if (roomMap[loc]) {
                roomMap[loc].forEach(room => {
                    const option = document.createElement("option");
                    option.value = room;
                    option.textContent = room;
                    roomSelect.appendChild(option);
                });
            }
        }
    </script>
</body>
</html>
