<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Input Aset Baru</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="manifest" href="/static/manifest.json">
  <meta name="theme-color" content="#1976d2">
  <link rel="icon" href="/static/icon-192.png" sizes="192x192" type="image/png">

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f8f8;
      padding: 2rem;
      max-width: 800px;
      margin: 0 auto;
    }

    h1 {
      color: #1976d2;
      text-align: center;
    }

    form {
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
    }

    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }

    input, select, textarea {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.5rem;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    button {
      margin-top: 2rem;
      background-color: #1976d2;
      color: white;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #125ea2;
    }

    .back-link {
      text-align: center;
      margin-top: 1rem;
    }

    .back-link a {
      text-decoration: none;
      color: #1976d2;
    }
  </style>
</head>
<body>
  <h1>‚ûï Tambah Aset Baru</h1>
  <form method="post" action="/input">
    <label>Nama Aset:</label>
    <input type="text" name="item_name" required>

    <label>Kategori:</label>
    <input type="text" name="category" list="category-list" required>
    <datalist id="category-list">
      {% for c in categories %}
      <option value="{{ c }}">
      {% endfor %}
    </datalist>

    <label>Type:</label>
    <input type="text" name="type_" list="type-list" required>
    <datalist id="type-list">
      {% for t in types %}
      <option value="{{ t.Type }}">
      {% endfor %}
    </datalist>

    <label>Manufacture:</label>
    <input type="text" name="manufacture">

    <label>Model:</label>
    <input type="text" name="model">

    <label>Serial Number:</label>
    <input type="text" name="serial_number">

    <label>Perusahaan (Company):</label>
    <input type="text" name="company" id="company" list="company-list" required>
    <datalist id="company-list">
      {% for c in companies %}
      <option value="{{ c }}">
      {% endfor %}
    </datalist>

    <label>Kode Perusahaan (Code Company):</label>
    <input type="text" name="code_company" maxlength="3" required>

    <label>Bisnis Unit:</label>
    <input type="text" name="bisnis_unit">

    <label>Lokasi (Location):</label>
    <input type="text" id="location" name="location" list="location-list" oninput="updateRoomOptions()" required>
    <datalist id="location-list">
      {% for loc in locations %}
      <option value="{{ loc.Location }}">
      {% endfor %}
    </datalist>

    <label>Ruang (Room Location):</label>
    <input type="text" id="room_location" name="room_location" list="room-options" required>
    <datalist id="room-options">
      <!-- populated by JS -->
    </datalist>

    <label>Notes:</label>
    <textarea name="notes" rows="2"></textarea>

    <label>Kondisi:</label>
    <select name="condition">
      <option value="">-- Pilih --</option>
      <option value="Baik">Baik</option>
      <option value="Rusak">Rusak</option>
      <option value="Perlu Perbaikan">Perlu Perbaikan</option>
    </select>

    <label>Tanggal Pembelian:</label>
    <input type="date" name="purchase_date" required>

    <label>Biaya Pembelian:</label>
    <input type="number" name="purchase_cost" required>

    <label>Garansi:</label>
    <select name="warranty">
      <option value="No">Tidak</option>
      <option value="Yes">Ya</option>
    </select>

    <label>Supplier:</label>
    <input type="text" name="supplier">

    <label>Journal:</label>
    <input type="text" name="journal">

    <label>Pemilik (Owner):</label>
    <input type="text" name="owner" list="owner-list" required>
    <datalist id="owner-list">
      {% for o in owners %}
      <option value="{{ o }}">
      {% endfor %}
    </datalist>

    <button type="submit">üíæ Simpan Aset</button>
  </form>

  <div class="back-link">
    <a href="/">‚Üê Kembali ke Beranda</a>
  </div>

  <script>
    const locations = {{ locations | tojson | safe }};
    const roomOptions = document.getElementById('room-options');

    function updateRoomOptions() {
      const selected = document.getElementById('location').value.trim().toLowerCase();
      roomOptions.innerHTML = "";
      const matched = locations.filter(loc => loc.Location.toLowerCase() === selected);
      matched.forEach(loc => {
        const opt = document.createElement("option");
        opt.value = loc.Room;
        roomOptions.appendChild(opt);
      });
    }
  </script>
</body>
</html>
